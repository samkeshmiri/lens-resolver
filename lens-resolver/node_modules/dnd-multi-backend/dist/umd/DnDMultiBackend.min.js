!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.DnDMultiBackend=t():e.DnDMultiBackend=t()}(self,(function(){return function(){"use strict";var e={2033:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.MultiBackendImpl=void 0;var n,r,s,o,a,c,f,u,h,d,p,l=i(6853),w=function(e,t,i,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(e,i):r?r.value=i:t.set(e,i),i},v=function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)};class y{constructor(e,t,i){if(n.set(this,void 0),r.set(this,void 0),s.set(this,void 0),o.set(this,void 0),a.set(this,void 0),c.set(this,((e,t,i)=>{var n,r;if(!i.backend)throw new Error("You must specify a 'backend' property in your Backend entry: ".concat(JSON.stringify(i)));const o=i.backend(e,t,i.options);let a=i.id;const c=!i.id&&o&&o.constructor;if(c&&(a=o.constructor.name),!a)throw new Error("You must specify an 'id' property in your Backend entry: ".concat(JSON.stringify(i),"\n        see this guide: https://github.com/louisbrunner/dnd-multi-backend/tree/master/packages/react-dnd-multi-backend#migrating-from-5xx"));if(c&&console.warn("Deprecation notice: You are using a pipeline which doesn't include backends' 'id'.\n        This might be unsupported in the future, please specify 'id' explicitely for every backend."),v(this,s,"f")[a])throw new Error("You must specify a unique 'id' property in your Backend entry:\n        ".concat(JSON.stringify(i)," (conflicts with: ").concat(JSON.stringify(v(this,s,"f")[a]),")"));return{id:a,instance:o,preview:null!==(n=i.preview)&&void 0!==n&&n,transition:i.transition,skipDispatchOnTransition:null!==(r=i.skipDispatchOnTransition)&&void 0!==r&&r}})),this.setup=()=>{if("undefined"!=typeof window){if(y.isSetUp)throw new Error("Cannot have two MultiBackends at the same time.");y.isSetUp=!0,v(this,f,"f").call(this,window),v(this,s,"f")[v(this,n,"f")].instance.setup()}},this.teardown=()=>{"undefined"!=typeof window&&(y.isSetUp=!1,v(this,u,"f").call(this,window),v(this,s,"f")[v(this,n,"f")].instance.teardown())},this.connectDragSource=(e,t,i)=>v(this,p,"f").call(this,"connectDragSource",e,t,i),this.connectDragPreview=(e,t,i)=>v(this,p,"f").call(this,"connectDragPreview",e,t,i),this.connectDropTarget=(e,t,i)=>v(this,p,"f").call(this,"connectDropTarget",e,t,i),this.profile=()=>v(this,s,"f")[v(this,n,"f")].instance.profile(),this.previewEnabled=()=>v(this,s,"f")[v(this,n,"f")].preview,this.previewsList=()=>v(this,r,"f"),this.backendsList=()=>v(this,o,"f"),f.set(this,(e=>{v(this,o,"f").forEach((t=>{t.transition&&e.addEventListener(t.transition.event,v(this,h,"f"))}))})),u.set(this,(e=>{v(this,o,"f").forEach((t=>{t.transition&&e.removeEventListener(t.transition.event,v(this,h,"f"))}))})),h.set(this,(e=>{const t=v(this,n,"f");if(v(this,o,"f").some((t=>!(t.id===v(this,n,"f")||!t.transition||!t.transition.check(e)||(w(this,n,t.id,"f"),0)))),v(this,n,"f")!==t){var i;v(this,s,"f")[t].instance.teardown(),Object.keys(v(this,a,"f")).forEach((e=>{const t=v(this,a,"f")[e];t.unsubscribe(),t.unsubscribe=v(this,d,"f").call(this,t.func,...t.args)})),v(this,r,"f").backendChanged(this);const o=v(this,s,"f")[v(this,n,"f")];if(o.instance.setup(),o.skipDispatchOnTransition)return;const c=new(0,e.constructor)(e.type,e);null===(i=e.target)||void 0===i||i.dispatchEvent(c)}})),d.set(this,((e,t,i,r)=>v(this,s,"f")[v(this,n,"f")].instance[e](t,i,r))),p.set(this,((e,t,i,n)=>{const r="".concat(e,"_").concat(t),s=v(this,d,"f").call(this,e,t,i,n);return v(this,a,"f")[r]={func:e,args:[t,i,n],unsubscribe:s},()=>{v(this,a,"f")[r].unsubscribe(),delete v(this,a,"f")[r]}})),!i||!i.backends||i.backends.length<1)throw new Error("You must specify at least one Backend, if you are coming from 2.x.x (or don't understand this error)\n        see this guide: https://github.com/louisbrunner/dnd-multi-backend/tree/master/packages/react-dnd-multi-backend#migrating-from-2xx");w(this,r,new l.PreviewListImpl,"f"),w(this,s,{},"f"),w(this,o,[],"f"),i.backends.forEach((i=>{const n=v(this,c,"f").call(this,e,t,i);v(this,s,"f")[n.id]=n,v(this,o,"f").push(n)})),w(this,n,v(this,o,"f")[0].id,"f"),w(this,a,{},"f")}}t.MultiBackendImpl=y,n=new WeakMap,r=new WeakMap,s=new WeakMap,o=new WeakMap,a=new WeakMap,c=new WeakMap,f=new WeakMap,u=new WeakMap,h=new WeakMap,d=new WeakMap,p=new WeakMap,y.isSetUp=!1},5141:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.MultiFactory=void 0;var n=i(2033);t.MultiFactory=(e,t,i)=>new n.MultiBackendImpl(e,t,i)},6853:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.PreviewListImpl=void 0;var i,n=function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)};t.PreviewListImpl=class{constructor(){i.set(this,void 0),this.register=e=>{n(this,i,"f").push(e)},this.unregister=e=>{let t;for(;-1!==(t=n(this,i,"f").indexOf(e));)n(this,i,"f").splice(t,1)},this.backendChanged=e=>{for(const t of n(this,i,"f"))t.backendChanged(e)},function(e,t,i,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");"a"===n?r.call(e,i):r?r.value=i:t.set(e,i)}(this,i,[],"f")}},i=new WeakMap},8012:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.createTransition=void 0,t.createTransition=(e,t)=>({event:e,check:t})},4796:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.TouchTransition=t.PointerTransition=t.MouseTransition=t.HTML5DragTransition=void 0;var n=i(8012);const r=(0,n.createTransition)("touchstart",(e=>{const t=e;return null!==t.touches&&void 0!==t.touches}));t.TouchTransition=r;const s=(0,n.createTransition)("dragstart",(e=>-1!==e.type.indexOf("drag")||-1!==e.type.indexOf("drop")));t.HTML5DragTransition=s;const o=(0,n.createTransition)("mousedown",(e=>-1===e.type.indexOf("touch")&&-1!==e.type.indexOf("mouse")));t.MouseTransition=o;const a=(0,n.createTransition)("pointerdown",(e=>"mouse"==e.pointerType));t.PointerTransition=a}},t={};function i(n){var r=t[n];if(void 0!==r)return r.exports;var s=t[n]={exports:{}};return e[n](s,s.exports,i),s.exports}var n={};return function(){var e=n;Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"HTML5DragTransition",{enumerable:!0,get:function(){return s.HTML5DragTransition}}),Object.defineProperty(e,"MouseTransition",{enumerable:!0,get:function(){return s.MouseTransition}}),Object.defineProperty(e,"MultiBackend",{enumerable:!0,get:function(){return t.MultiFactory}}),Object.defineProperty(e,"PointerTransition",{enumerable:!0,get:function(){return s.PointerTransition}}),Object.defineProperty(e,"TouchTransition",{enumerable:!0,get:function(){return s.TouchTransition}}),Object.defineProperty(e,"createTransition",{enumerable:!0,get:function(){return r.createTransition}});var t=i(5141),r=i(8012),s=i(4796)}(),n}()}));