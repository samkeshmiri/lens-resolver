{"version":3,"sources":["../../../../src/common/endowments/crypto.ts"],"sourcesContent":["import { rootRealmGlobal } from '../globalObject';\n\nexport const createCrypto = () => {\n  if (\n    'crypto' in rootRealmGlobal &&\n    typeof rootRealmGlobal.crypto === 'object' &&\n    'SubtleCrypto' in rootRealmGlobal &&\n    typeof rootRealmGlobal.SubtleCrypto === 'function'\n  ) {\n    return {\n      crypto: harden(rootRealmGlobal.crypto),\n      SubtleCrypto: harden(rootRealmGlobal.SubtleCrypto),\n    };\n  }\n  // For now, we expose the experimental webcrypto API for Node.js execution environments\n  // TODO: Figure out if this is enough long-term or if we should use a polyfill.\n  /* eslint-disable-next-line @typescript-eslint/no-require-imports, @typescript-eslint/no-var-requires, n/global-require */\n  const crypto = require('crypto').webcrypto;\n  return {\n    crypto: harden(crypto),\n    SubtleCrypto: harden(crypto.subtle.constructor),\n  } as const;\n};\n\nconst endowmentModule = {\n  names: ['crypto', 'SubtleCrypto'] as const,\n  factory: createCrypto,\n};\nexport default endowmentModule;\n"],"names":["createCrypto","rootRealmGlobal","crypto","SubtleCrypto","harden","require","webcrypto","subtle","constructor","endowmentModule","names","factory"],"mappings":";;;;;;;;;;;IAEaA,YAAY;eAAZA;;IA0Bb,OAA+B;eAA/B;;;8BA5BgC;AAEzB,MAAMA,eAAe;IAC1B,IACE,YAAYC,6BAAe,IAC3B,OAAOA,6BAAe,CAACC,MAAM,KAAK,YAClC,kBAAkBD,6BAAe,IACjC,OAAOA,6BAAe,CAACE,YAAY,KAAK,YACxC;QACA,OAAO;YACLD,QAAQE,OAAOH,6BAAe,CAACC,MAAM;YACrCC,cAAcC,OAAOH,6BAAe,CAACE,YAAY;QACnD;IACF;IACA,uFAAuF;IACvF,+EAA+E;IAC/E,wHAAwH,GACxH,MAAMD,SAASG,QAAQ,UAAUC,SAAS;IAC1C,OAAO;QACLJ,QAAQE,OAAOF;QACfC,cAAcC,OAAOF,OAAOK,MAAM,CAACC,WAAW;IAChD;AACF;AAEA,MAAMC,kBAAkB;IACtBC,OAAO;QAAC;QAAU;KAAe;IACjCC,SAASX;AACX;MACA,WAAeS"}