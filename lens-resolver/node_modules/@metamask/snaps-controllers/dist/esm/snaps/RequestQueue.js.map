{"version":3,"sources":["../../../src/snaps/RequestQueue.ts"],"sourcesContent":["export class RequestQueue {\n  public readonly maxQueueSize: number;\n\n  private readonly queueSizes: Map<string, number>;\n\n  constructor(maxQueueSize: number) {\n    this.maxQueueSize = maxQueueSize;\n    this.queueSizes = new Map<string, number>();\n  }\n\n  /**\n   * Increments the queue count for a particular origin.\n   *\n   * @param origin - A string identifying the origin.\n   */\n  public increment(origin: string) {\n    const currentCount = this.queueSizes.get(origin) ?? 0;\n    if (currentCount >= this.maxQueueSize) {\n      throw new Error('Maximum number of requests reached. Try again later.');\n    }\n    this.queueSizes.set(origin, currentCount + 1);\n  }\n\n  /**\n   * Decrements the queue count for a particular origin.\n   *\n   * @param origin - A string identifying the origin.\n   */\n  public decrement(origin: string) {\n    const currentCount = this.queueSizes.get(origin) ?? 0;\n    if (currentCount === 0) {\n      throw new Error(\n        `Cannot decrement, ${origin} does not have any outstanding requests.`,\n      );\n    }\n    this.queueSizes.set(origin, currentCount - 1);\n  }\n\n  /**\n   * Gets the queue count for a particular origin.\n   *\n   * @param origin - A string identifying the origin.\n   * @returns The queue count for the origin.\n   */\n  public get(origin: string): number {\n    return this.queueSizes.get(origin) ?? 0;\n  }\n}\n"],"names":["RequestQueue","increment","origin","currentCount","queueSizes","get","maxQueueSize","Error","set","decrement","constructor","Map"],"mappings":";;;;;;;;;;;;;AAAA,OAAO,MAAMA;IAUX;;;;GAIC,GACD,AAAOC,UAAUC,MAAc,EAAE;QAC/B,MAAMC,eAAe,IAAI,CAACC,UAAU,CAACC,GAAG,CAACH,WAAW;QACpD,IAAIC,gBAAgB,IAAI,CAACG,YAAY,EAAE;YACrC,MAAM,IAAIC,MAAM;QAClB;QACA,IAAI,CAACH,UAAU,CAACI,GAAG,CAACN,QAAQC,eAAe;IAC7C;IAEA;;;;GAIC,GACD,AAAOM,UAAUP,MAAc,EAAE;QAC/B,MAAMC,eAAe,IAAI,CAACC,UAAU,CAACC,GAAG,CAACH,WAAW;QACpD,IAAIC,iBAAiB,GAAG;YACtB,MAAM,IAAII,MACR,CAAC,kBAAkB,EAAEL,OAAO,wCAAwC,CAAC;QAEzE;QACA,IAAI,CAACE,UAAU,CAACI,GAAG,CAACN,QAAQC,eAAe;IAC7C;IAEA;;;;;GAKC,GACD,AAAOE,IAAIH,MAAc,EAAU;QACjC,OAAO,IAAI,CAACE,UAAU,CAACC,GAAG,CAACH,WAAW;IACxC;IAzCAQ,YAAYJ,YAAoB,CAAE;QAJlC,uBAAgBA,gBAAhB,KAAA;QAEA,uBAAiBF,cAAjB,KAAA;QAGE,IAAI,CAACE,YAAY,GAAGA;QACpB,IAAI,CAACF,UAAU,GAAG,IAAIO;IACxB;AAuCF"}