import { assert } from "@metamask/utils";
import { IS_TEST_BUILD } from "./utils";
/**
 * Sets the window API. This is useful for automated testing.
 *
 * @param store - The store.
 */ export function setWindowApi(store) {
    assert(IS_TEST_BUILD, "This function should only be called in a test build.");
    window.__SIMULATOR_API__ = {
        dispatch: store.dispatch,
        subscribe: store.subscribe.bind(store),
        getState: function() {
            return store.getState();
        },
        getRequestId: function() {
            return store.getState().simulation.requestId;
        },
        getNotifications: function(requestId) {
            var state = store.getState();
            return state.notifications.allNotifications.filter(function(notification) {
                return notification.id === requestId;
            });
        }
    };
}
