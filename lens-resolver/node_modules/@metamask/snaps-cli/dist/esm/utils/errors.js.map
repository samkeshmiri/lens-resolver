{"version":3,"sources":["../../../src/utils/errors.ts"],"sourcesContent":["import { hasProperty, isObject } from '@metamask/utils';\n\nimport { CLIError } from '../errors';\n\n/**\n * Get the error message from an error in a Yargs `fail` handler. If the error\n * is not `undefined`, {@link getErrorMessage} is used to get the error message.\n * Otherwise, the given message is returned.\n *\n * @param message - The error message.\n * @param error - The error object. This may be `undefined`.\n * @returns The error message.\n */\nexport function getYargsErrorMessage(message: string, error?: unknown): string {\n  if (error) {\n    if (error instanceof CLIError) {\n      return error.message;\n    }\n\n    return getErrorMessage(error);\n  }\n\n  return message;\n}\n\n/**\n * Get the error message from an error.\n *\n * - If the error is an object with a `stack` property, the `stack` property is\n * returned.\n * - If the error is an object with a `message` property, the `message`\n * property is returned.\n * - Otherwise, the error is converted to a string and returned.\n *\n * @param error - The error to get the message from.\n * @returns The error message.\n */\nexport function getErrorMessage(error: unknown): string {\n  if (isObject(error)) {\n    if (hasProperty(error, 'stack') && typeof error.stack === 'string') {\n      return error.stack;\n    }\n\n    if (hasProperty(error, 'message') && typeof error.message === 'string') {\n      return error.message;\n    }\n  }\n\n  return String(error);\n}\n"],"names":["hasProperty","isObject","CLIError","getYargsErrorMessage","message","error","getErrorMessage","stack","String"],"mappings":"AAAA,SAASA,WAAW,EAAEC,QAAQ,QAAQ,kBAAkB;AAExD,SAASC,QAAQ,QAAQ,YAAY;AAErC;;;;;;;;CAQC,GACD,OAAO,SAASC,qBAAqBC,OAAe,EAAEC,KAAe;IACnE,IAAIA,OAAO;QACT,IAAIA,iBAAiBH,UAAU;YAC7B,OAAOG,MAAMD,OAAO;QACtB;QAEA,OAAOE,gBAAgBD;IACzB;IAEA,OAAOD;AACT;AAEA;;;;;;;;;;;CAWC,GACD,OAAO,SAASE,gBAAgBD,KAAc;IAC5C,IAAIJ,SAASI,QAAQ;QACnB,IAAIL,YAAYK,OAAO,YAAY,OAAOA,MAAME,KAAK,KAAK,UAAU;YAClE,OAAOF,MAAME,KAAK;QACpB;QAEA,IAAIP,YAAYK,OAAO,cAAc,OAAOA,MAAMD,OAAO,KAAK,UAAU;YACtE,OAAOC,MAAMD,OAAO;QACtB;IACF;IAEA,OAAOI,OAAOH;AAChB"}