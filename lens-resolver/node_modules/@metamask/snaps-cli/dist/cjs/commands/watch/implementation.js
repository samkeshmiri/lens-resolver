"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "watch", {
    enumerable: true,
    get: function() {
        return watch;
    }
});
const _path = require("path");
const _webpack = require("../../webpack");
async function watch(config, options) {
    const compiler = await (0, _webpack.getCompiler)(config, {
        evaluate: config.evaluate,
        watch: true,
        spinner: options?.spinner
    });
    return new Promise((resolve, reject)=>{
        compiler.watch({
            ignored: [
                '**/node_modules/**/*',
                `**/${(0, _path.basename)(config.output.path)}/**/*`
            ]
        }, (watchError)=>{
            if (watchError) {
                reject(watchError);
                return;
            }
            resolve(compiler.watching);
        });
    });
}

//# sourceMappingURL=implementation.js.map